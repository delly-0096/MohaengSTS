<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mohaeng.support.notice.mapper.INoticeMapper">
	<!-- 공지 상세 -->
	<select id="selectNotice" parameterType="int" resultType="kr.or.ddit.mohaeng.vo.NoticeVO">
     SELECT
      NTC_NO     AS ntcNo,
      NTC_TITLE  AS ntcTitle,
      NTC_CONTENT AS ntcContent,
      REG_ID     AS regId,
      REG_DT     AS regDt,
      NTC_TYPE   AS ntcType,
      VIEW_CNT   AS viewCnt,
      STATUS     AS status,
      ATTACH_NO  AS attachNo
     FROM NOTICE
     WHERE NTC_NO = #{ntcNo}

</select>
	 <!-- 조회수 증가 -->
		<update id="incrementHit" parameterType="int">
 		   UPDATE NOTICE
   		   SET VIEW_CNT = NVL(VIEW_CNT, 0) + 1
   		   WHERE NTC_NO = #{value}
 		 </update>
		
		<select id="selectNoticeList" resultType="kr.or.ddit.mohaeng.vo.NoticeVO">
			  SELECT
			    NTC_NO    AS ntcNo,
			    NTC_TITLE AS ntcTitle,
			    REG_DT    AS regDt,
			    NTC_TYPE  AS ntcType,
			    VIEW_CNT  AS viewCnt,
			    STATUS     AS status,
      			ATTACH_NO  AS attachNo
			  FROM NOTICE
			  WHERE STATUS= 'PUBLISHED'
			  ORDER BY NTC_NO DESC
			</select>
			
			<!-- 공지사항 등록-->
		<insert id="insertNotice"
        parameterType="kr.or.ddit.mohaeng.vo.NoticeVO">
			  INSERT INTO NOTICE (
			    NTC_NO,
			    NTC_TITLE,
			    NTC_CONTENT,
			    REG_ID,
			    REG_DT,
			    NTC_TYPE,
			    VIEW_CNT,
			    STATUS
			  ) VALUES (
			    SEQ_NOTICE.NEXTVAL,
			    #{ntcTitle},
			    #{ntcContent},
			    #{regId},
			    SYSDATE,
			    #{ntcType},
			    0,
			    'PUBLISHED'
			  )
</insert>
			<!--수정-->
			<update id="updateNotice" parameterType="kr.or.ddit.mohaeng.vo.NoticeVO">
				  UPDATE NOTICE
				  SET
				    NTC_TITLE   = #{ntcTitle},
				    NTC_CONTENT = #{ntcContent},
				    NTC_TYPE    = #{ntcType},
				    STATUS = #{status},
                    ATTACH_NO = #{attachNo}
				  WHERE NTC_NO = #{ntcNo}
			</update>

			<!--삭제-->
			
			<update id="deleteNotice" parameterType="int">
				  UPDATE NOTICE
				  SET STATUS = 'y'
				  WHERE NTC_NO = #{value}
			</update>

			
			
			
			
			
			

</mapper>