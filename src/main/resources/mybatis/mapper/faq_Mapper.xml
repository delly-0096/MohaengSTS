<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mohaeng.support.faq.mapper.IFaqMapper">

	<resultMap type="kr.or.ddit.mohaeng.vo.FaqVO" id="faqMap">
		<id property="faqNo" column="FAQ_NO"/>
		<result property="faqCategoryCd" column="FAQ_CATEGORY_CD"/>
		<result property="faqTitle" column="FAQ_TITLE"/>
		<result property="faqContent" column="FAQ_CONTENT"/>
		<result property="faqOrder" column="FAQ_ORDER"/>
		<result property="status" column="STATUS"/>
		<result property="useYn" column="USE_YN"/>
		<result property="regId" column="REG_ID"/>
		<result property="regDt" column="REG_DT"/>
	</resultMap>

	<!-- FAQ 목록 조회 (사용중인 것만) -->
	<select id="selectFaqList" resultMap="faqMap">
		select
			FAQ_NO,
			FAQ_CATEGORY_CD,
			FAQ_TITLE,
			FAQ_CONTENT,
			FAQ_ORDER,
			STATUS,
			USE_YN,
			REG_ID,
			REG_DT
		from FAQ
		where USE_YN = '1'
		ORDER BY FAQ_ORDER ASC, FAQ_NO DESC
	</select>

	<!-- FAQ 카테고리별 조회 -->
	<select id="selectFaqListByCategory" resultMap="faqMap">
		select
			FAQ_NO,
			FAQ_CATEGORY_CD,
			FAQ_TITLE,
			FAQ_CONTENT,
			FAQ_ORDER,
			STATUS,
			USE_YN,
			REG_ID,
			REG_DT
		from FAQ
		where FAQ_CATEGORY_CD=#{faqCategoryCd}
		  and USE_YN = '1'
		ORDER BY FAQ_ORDER ASC, FAQ_NO DESC
	</select>

	<!-- FAQ 상세 조회 -->
	<select id="selectFaqDetail" resultMap="faqMap">
		select
			FAQ_NO,
			FAQ_CATEGORY_CD,
			FAQ_TITLE,
			FAQ_CONTENT,
			FAQ_ORDER,
			STATUS,
			USE_YN,
			REG_ID,
			REG_DT
		from FAQ
		where FAQ_NO=#{faqNo}
	</select>

	<!-- FAQ 검색 -->
	<select id="searchFaq" resultMap="faqMap">
		select
			FAQ_NO,
			FAQ_CATEGORY_CD,
			FAQ_TITLE,
			FAQ_CONTENT,
			FAQ_ORDER,
			STATUS,
			USE_YN,
			REG_ID,
			REG_DT
		from FAQ
		where USE_YN = '1'
			and(
				FAQ_TITLE like '%' ||#{keyword}||'%'
				or FAQ_CONTENT like '%' ||#{keyword}||'%'
			)
		ORDER BY FAQ_ORDER ASC, FAQ_NO DESC
	</select>

</mapper>